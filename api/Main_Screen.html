<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Parkhere-Main Screen</title>
    <link rel="stylesheet" href="parking.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>
</head>
<body>
    <div class="update"></div>
    <div class="parkContainer">
        <div class="parkingArea">
            <div class="box" id="0"><p class="id" >A1</p></div>
            <div class="box" id="1"><p class="id" >A2</p></div>
            <div class="box" id="2"><p class="id" >A3</p></div>
            <div class="box" id="3"><p class="id" >A4</p></div>
            <div class="box" id="4"><p class="id" >A5</p></div>
            <div class="box" id="5"><p class="id" >A6</p></div>
        </div>



        <script>
            // Fetch data from the API endpoint
            fetch('http://localhost:3000/api/searching')
                .then(response => {
                    // Check if response is successful
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    // Parse JSON data
                    return response.json();
                })
                .then(data => {
                    // Update the status paragraph with the fetched data
                    const statusElement = document.getElementById("0");
                    console.log(statusElement)
                    statusElement.textContent = `Status: ${data.park_status}`;

                    // Manipulate the DOM based on the fetched data
                    if (data.status === 'occupied') {
                        // Example: Change background color if parking is occupied
                        document.body.style.backgroundColor = 'red';
                    } else {
                        // Example: Change background color back to default if parking is available
                        document.body.style.backgroundColor = 'green';
                    }
                })
                .catch(error => {
                    console.error('There was a problem with the fetch operation:', error);
                    // Update the status paragraph with an error message
                    const statusElement = document.getElementById('status');
                    statusElement.textContent = 'Failed to fetch parking status';
                });
        </script>

    </div>
</body>
</html>